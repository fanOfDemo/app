<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>yiming</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="yiming&apos;s blog | java | android | ios">
<meta property="og:type" content="website">
<meta property="og:title" content="yiming">
<meta property="og:url" content="http://fanofdemo.github.io/index.html">
<meta property="og:site_name" content="yiming">
<meta property="og:description" content="yiming&apos;s blog | java | android | ios">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="yiming">
<meta name="twitter:description" content="yiming&apos;s blog | java | android | ios">
  
    <link rel="alternative" href="/atom.xml" title="yiming" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="null" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">yiming</a></h1>
		</hgroup>

		
		<p class="header-subtitle">恶补基础知识中...</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>標籤</li>
						
						<li>友情链接</li>
						
						
						<li>關於</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/instagram">相册</a></li>
				        
							<li><a href="/about">关于我</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/fanOfDemo" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/wengyiming" title="weibo">weibo</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/android/" style="font-size: 20px;">android</a> <a href="/tags/android基础知识点复习总结/" style="font-size: 10px;">android基础知识点复习总结</a> <a href="/tags/fragment/" style="font-size: 10px;">fragment</a> <a href="/tags/google推荐android代码规范/" style="font-size: 10px;">google推荐android代码规范</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/XXApple/AndroidLibs">Android开源代码大全</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.colorfulcat.xyz/?from=androidcat">大花猫</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://androidcat.com/">android素材书签</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://dev2patrick.com/">patrick</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://aimeow.com/">aimeow</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">最近学习方向 插件开发 hook Laucher源码 URI路由架构</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">yiming</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="null" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">yiming</h1>
			</hgroup>
			
			<p class="header-subtitle">恶补基础知识中...</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/instagram">相册</a></li>
		        
					<li><a href="/about">关于我</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/fanOfDemo" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/wengyiming" title="weibo">weibo</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-android基础知识点复习总结" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/05/android基础知识点复习总结/" class="article-date">
  	<time datetime="2016-03-05T14:25:00.000Z" itemprop="datePublished">3月 5 2016</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/05/android基础知识点复习总结/">android基础知识点复习总结</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>(Android 屏幕适配方案-工具)[!<a href="http://www.jianshu.com/p/dfc9d1265bc2" target="_blank" rel="external">http://www.jianshu.com/p/dfc9d1265bc2</a>]</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android基础知识点复习总结/">android基础知识点复习总结</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Ribot-的-Android-代码风格指南和架构指南" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/05/Ribot-的-Android-代码风格指南和架构指南/" class="article-date">
  	<time datetime="2016-03-05T14:20:23.000Z" itemprop="datePublished">3月 5 2016</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/05/Ribot-的-Android-代码风格指南和架构指南/">Ribot 的 Android 代码风格指南和架构指南</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li>Project guidelines</li>
</ol>
<p>1.1 Project structure</p>
<p>New projects should follow the Android Gradle project structure that is defined on the Android Gradle plugin user guide. The ribot Boilerplate project is a good reference to start from.</p>
<p>1.2 File naming</p>
<p>1.2.1 Class files</p>
<p>Class names are written in UpperCamelCase.</p>
<p>For classes that extend an Android component, the name of the class should end with the name of the component; for example: SignInActivity, SignInFragment, ImageUploaderService, ChangePasswordDialog.</p>
<p>1.2.2 Resources files</p>
<p>Resources file names are written in lowercase_underscore.</p>
<p>1.2.2.1 Drawable files</p>
<p>Naming conventions for drawables:</p>
<p>Asset Type    Prefix    Example<br>Action bar    ab<em>    ab_stacked.9.png<br>Button    btn</em>    btn<em>send_pressed.9.png<br>Dialog    dialog</em>    dialog<em>top.9.png<br>Divider    divider</em>    divider<em>horizontal.9.png<br>Icon    ic</em>    ic<em>star.png<br>Menu    menu</em>    menu<em>submenu_bg.9.png<br>Notification    notification</em>    notification<em>bg.9.png<br>Tabs    tab</em>    tab_pressed.9.png<br>Naming conventions for icons (taken from Android iconography guidelines):</p>
<p>Asset Type    Prefix    Example<br>Icons    ic_    ic_star.png<br>Launcher icons    ic_launcher    ic_launcher_calendar.png<br>Menu icons and Action Bar icons    ic_menu    ic_menu_archive.png<br>Status bar icons    ic_stat_notify    ic_stat_notify_msg.png<br>Tab icons    ic_tab    ic_tab_recent.png<br>Dialog icons    ic_dialog    ic_dialog_info.png<br>Naming conventions for selector states:</p>
<p>State    Suffix    Example<br>Normal    _normal    btn_order_normal.9.png<br>Pressed    _pressed    btn_order_pressed.9.png<br>Focused    _focused    btn_order_focused.9.png<br>Disabled    _disabled    btn_order_disabled.9.png<br>Selected    _selected    btn_order_selected.9.png<br>1.2.2.2 Layout files</p>
<p>Layout files should match the name of the Android components that they are intended for but moving the top level component name to the beginning. For example, if we are creating a layout for the SignInActivity, the name of the layout file should be activity_sign_in.xml.</p>
<p>Component    Class Name    Layout Name<br>Activity    UserProfileActivity    activity<em>user_profile.xml<br>Fragment    SignUpFragment    fragment_sign_up.xml<br>Dialog    ChangePasswordDialog    dialog_change_password.xml<br>AdapterView item    —-    item_person.xml<br>Partial layout    —-    partial_stats_bar.xml<br>A slightly different case is when we are creating a layout that is going to be inflated by an Adapter, e.g to populate a ListView. In this case, the name of the layout should start with item</em>.</p>
<p>Note that there are cases where these rules will not be possible to apply. For example, when creating layout files that are intended to be part of other layouts. In this case you should use the prefix partial_.</p>
<p>1.2.2.3 Menu files</p>
<p>Similar to layout files, menu files should match the name of the component. For example, if we are defining a menu file that is going to be used in the UserActivity, then the name of the file should be activity_user.xml</p>
<p>A good practice is to not include the word menu as part of the name because these files are already located in the menu directory.</p>
<p>1.2.2.4 Values files</p>
<p>Resource files in the values folder should be plural, e.g. strings.xml, styles.xml, colors.xml, dimens.xml, attrs.xml</p>
<p>2 Code guidelines</p>
<p>2.1 Java language rules</p>
<p>2.1.1 Don’t ignore exceptions</p>
<p>You must never do the following:</p>
<p>java void setServerPort(String value) { try { serverPort = Integer.parseInt(value); } catch (NumberFormatException e) { } }</p>
<p>While you may think that your code will never encounter this error condition or that it is not important to handle it, ignoring exceptions like above creates mines in your code for someone else to trip over some day. You must handle every Exception in your code in some principled way. The specific handling varies depending on the case. - (Android code style guidelines)</p>
<p>See alternatives here.</p>
<p>2.1.2 Don’t catch generic exception</p>
<p>You should not do this:</p>
<p>java try { someComplicatedIOFunction(); // may throw IOException someComplicatedParsingFunction(); // may throw ParsingException someComplicatedSecurityFunction(); // may throw SecurityException // phew, made it all the way } catch (Exception e) { // I’ll just catch all exceptions handleError(); // with one generic handler! }</p>
<p>See the reason why and some alternatives here</p>
<p>2.1.3 Don’t use finalizers</p>
<p>We don’t use finalizers. There are no guarantees as to when a finalizer will be called, or even that it will be called at all. In most cases, you can do what you need from a finalizer with good exception handling. If you absolutely need it, define a close() method (or the like) and document exactly when that method needs to be called. See InputStream for an example. In this case it is appropriate but not required to print a short log message from the finalizer, as long as it is not expected to flood the logs. - (Android code style guidelines)</p>
<p>2.1.4 Fully qualify imports</p>
<p>This is bad: import foo.*;</p>
<p>This is good: import foo.Bar;</p>
<p>See more info here</p>
<p>2.2 Java style rules</p>
<p>2.2.1 Fields definition and naming</p>
<p>Fields should be defined at the top of the file and they should follow the naming rules listed below.</p>
<p>Private, non-static field names start with m.<br>Private, static field names start with s.<br>Other fields start with a lower case letter.<br>Static final fields (constants) are ALL_CAPS_WITH_UNDERSCORES.<br>Example:</p>
<p>java public class MyClass { public static final int SOME_CONSTANT = 42; public int publicField; private static MyClass sSingleton; int mPackagePrivate; private int mPrivate; protected int mProtected; }</p>
<p>2.2.3 Treat acronyms as words</p>
<p>Good    Bad<br>XmlHttpRequest    XMLHTTPRequest<br>getCustomerId    getCustomerID<br>String url    String URL<br>long id    long ID<br>2.2.4 Use spaces for indentation</p>
<p>Use 4 space indents for blocks:</p>
<p>java if (x == 1) { x++; }</p>
<p>Use 8 space indents for line wraps:</p>
<p>java Instrument i = someLongExpression(that, wouldNotFit, on, one, line);</p>
<p>2.2.5 Use standard brace style</p>
<p>Braces go on the same line as the code before them.</p>
<p>java class MyClass { int func() { if (something) { // … } else if (somethingElse) { // … } else { // … } } }</p>
<p>Braces around the statements are required unless the condition and the body fit on one line.</p>
<p>If the condition and the body fit on one line and that line is shorter than the max line length, then braces are not required, e.g.</p>
<p>java if (condition) body();</p>
<p>This is bad:</p>
<p>java if (condition) body(); // bad!</p>
<p>2.2.6 Annotations</p>
<p>2.2.6.1 Annotations practices</p>
<p>According to the Android code style guide, the standard practices for some of the predefined annotations in Java are:</p>
<p>@Override: The @Override annotation must be used whenever a method overrides the declaration or implementation from a super-class. For example, if you use the @inheritdocs Javadoc tag, and derive from a class (not an interface), you must also annotate that the method @Overrides the parent class’s method.</p>
<p>@SuppressWarnings: The @SuppressWarnings annotation should only be used under circumstances where it is impossible to eliminate a warning. If a warning passes this “impossible to eliminate” test, the @SuppressWarnings annotation must be used, so as to ensure that all warnings reflect actual problems in the code.</p>
<p>More information about annotation guidelines can be found here.</p>
<p>2.2.6.2 Annotations style</p>
<p>Classes, Methods and Constructors</p>
<p>When annotations are applied to a class, method, or constructor, they are listed after the documentation block and should appear as one annotation per line .</p>
<p>java /<em> This is the documentation block about the class </em>/ @AnnotationA @AnnotationB public class MyAnnotatedClass { }</p>
<p>Fields</p>
<p>Annotations applying to fields should be listed on the same line, unless the line reaches the maximum line length.</p>
<p>java @Nullable @Mock DataManager mDataManager;</p>
<p>2.2.7 Limit variable scope</p>
<p>The scope of local variables should be kept to a minimum (Effective Java Item 29). By doing so, you increase the readability and maintainability of your code and reduce the likelihood of error. Each variable should be declared in the innermost block that encloses all uses of the variable.</p>
<p>Local variables should be declared at the point they are first used. Nearly every local variable declaration should contain an initializer. If you don’t yet have enough information to initialize a variable sensibly, you should postpone the declaration until you do. - (Android code style guidelines)</p>
<p>2.2.8 Order import statements</p>
<p>If you are using an IDE such as Android Studio, you don’t have to worry about this because your IDE is already obeying these rules. If not, have a look below.</p>
<p>The ordering of import statements is:</p>
<p>Android imports<br>Imports from third parties (com, junit, net, org)<br>java and javax<br>Same project imports<br>To exactly match the IDE settings, the imports should be:</p>
<p>Alphabetically ordered within each grouping, with capital letters before lower case letters (e.g. Z before a).<br>There should be a blank line between each major grouping (android, com, junit, net, org, java, javax).<br>More info here</p>
<p>2.2.9 Logging guidelines</p>
<p>Use the logging methods provided by the Log class to print out error messages or other information that may be useful for developers to identify issues:</p>
<p>Log.v(String tag, String msg) (verbose)<br>Log.d(String tag, String msg) (debug)<br>Log.i(String tag, String msg) (information)<br>Log.w(String tag, String msg) (warning)<br>Log.e(String tag, String msg) (error)<br>As a general rule, we use the class name as tag and we define it as a static final field at the top of the file. For example:</p>
<figure class="highlight java"><figcaption><span>public class MyClass &#123; private static final String TAG = "MyClass";</span></figcaption><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">myMethod</span><span class="params">()</span> </span>&#123;</span><br><span class="line">Log.e(TAG, <span class="string">"My error message"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>VERBOSE and DEBUG logs must be disabled on release builds. It is also recommended to disable INFORMATION, WARNING and ERROR logs but you may want to keep them enabled if you think they may be useful to identify issues on release builds. If you decide to leave them enabled, you have to make sure that they are not leaking private information such as email addresses, user ids, etc.</p>
<p>To only show logs on debug builds:</p>
<p>java if (BuildConfig.DEBUG) Log.d(TAG, “The value of x is “ + x);</p>
<p>2.2.10 Class member ordering</p>
<p>There is no single correct solution for this but using a logical and consistent order will improve code learnability and readability. It is recommendable to use the following order:</p>
<p>Constants<br>Fields<br>Constructors<br>Override methods and callbacks (public or private)<br>Public methods<br>Private methods<br>Inner classes or interfaces<br>Example:</p>
<figure class="highlight java"><figcaption><span>public class MainActivity extends Activity &#123;</span></figcaption><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">private</span> String mTitle;</span><br><span class="line"><span class="keyword">private</span> TextView mTextViewTitle;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTitle</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">mTitle = title;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setUpView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">AnInnerClass</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If your class is extending an Android component such as an Activity or a Fragment, it is a good practice to order the override methods so that they match the component’s lifecycle. For example, if you have an Activity that implements onCreate(), onDestroy(), onPause() and onResume(), then the correct order is:</p>
<figure class="highlight java"><figcaption><span>public class MainActivity extends Activity &#123;</span></figcaption><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//Order matches Activity lifecycle</span></span><br><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.2.11 Parameter ordering in methods</p>
<p>When programming for Android, it is quite common to define methods that take a Context. If you are writing a method like this, then the Context must be the first parameter.</p>
<p>The opposite case are callback interfaces that should always be the last parameter.</p>
<p>Examples:</p>
<figure class="highlight java"><figcaption><span>// Context always goes first public User loadUser(Context context, int userId);</span></figcaption><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// Callbacks always go last public void loadUserAsync(Context context, int userId, UserCallback callback);</span></span><br></pre></td></tr></table></figure>
<p>2.2.13 String constants, naming, and values</p>
<p>Many elements of the Android SDK such as SharedPreferences, Bundle, or Intent use a key-value pair approach so it’s very likely that even for a small app you end up having to write a lot of String constants.</p>
<p>When using one of these components, you must define the keys as a static final fields and they should be prefixed as indicated below.</p>
<p>Element    Field Name Prefix<br>SharedPreferences    PREF<em><br>Bundle    BUNDLE</em><br>Fragment Arguments    ARGUMENT<em><br>Intent Extra    EXTRA</em><br>Intent Action    ACTION_<br>Note that the arguments of a Fragment - Fragment.getArguments() - are also a Bundle. However, because this is a quite common use of Bundles, we define a different prefix for them.</p>
<p>Example:</p>
<figure class="highlight java"><figcaption><span>// Note the value of the field is the same as the name to avoid duplication issues static final String PREF_EMAIL = "PREF_EMAIL"; static final String BUNDLE_AGE = "BUNDLE_AGE"; static final String ARGUMENT_USER_ID = "ARGUMENT_USER_ID";</span></figcaption><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// Intent-related items use full package name as value static final String EXTRA_SURNAME = "com.myapp.extras.EXTRA_SURNAME"; static final String ACTION_OPEN_USER = "com.myapp.action.ACTION_OPEN_USER";</span></span><br></pre></td></tr></table></figure>
<p>2.2.14 Arguments in Fragments and Activities</p>
<p>When data is passed into an Activityor Fragment via an Intent or a Bundle, the keys for the different values must follow the rules described in the section above.</p>
<p>When an Activity or Fragment expects arguments, it should provide a public static method that facilitates the creation of the relevant Intent or Fragment.</p>
<p>In the case of Activities the method is usually called getStartIntent():</p>
<p>java public static Intent getStartIntent(Context context, User user) { Intent intent = new Intent(context, ThisActivity.class); intent.putParcelableExtra(EXTRA_USER, user); return intent; }</p>
<p>For Fragments it is named newInstance() and handles the creation of the Fragment with the right arguments:</p>
<p>java public static UserFragment newInstance(User user) { UserFragment fragment = new UserFragment; Bundle args = new Bundle(); args.putParcelable(ARGUMENT_USER, user); fragment.setArguments(args) return fragment; }</p>
<p>Note 1: These methods should go at the top of the class before onCreate().</p>
<p>Note 2: If we provide the methods described above, the keys for extras and arguments should be private because there is not need for them to be exposed outside the class.</p>
<p>2.2.15 Line length limit</p>
<p>Code lines should not exceed 100 characters. If the line is longer than this limit there are usually two options to reduce its length:</p>
<p>Extract a local variable or method (preferable).<br>Apply line-wrapping to divide a single line into multiple ones.<br>There are two exceptions where it is possible to have lines longer than 100:</p>
<p>Lines that are not possible to split, e.g. long URLs in comments.<br>package and import statements.<br>2.2.15.1 Line-wrapping strategies</p>
<p>There isn’t an exact formula that explains how to line-wrap and quite often different solutions are valid. However there are a few rules that can be applied to common cases.</p>
<p>Break at operators</p>
<p>When the line is broken at an operator, the break comes before the operator. For example:</p>
<p>java int longName = anotherVeryLongVariable + anEvenLongerOne - thisRidiculousLongOne + theFinalOne;</p>
<p>Assignment Operator Exception</p>
<p>An exception to the break at operators rule is the assignment operator =, where the line break should happen after the operator.</p>
<p>java int longName = anotherVeryLongVariable + anEvenLongerOne - thisRidiculousLongOne + theFinalOne;</p>
<p>Method chain case</p>
<p>When multiple methods are chained in the same line - for example when using Builders - every call to a method should go in its own line, breaking the line before the .</p>
<p>java Picasso.with(context).load(“<a href="http://ribot.co.uk/images/sexyjoe.jpg&quot;).into(imageView" target="_blank" rel="external">http://ribot.co.uk/images/sexyjoe.jpg&quot;).into(imageView</a>);</p>
<p>java Picasso.with(context) .load(“<a href="http://ribot.co.uk/images/sexyjoe.jpg" target="_blank" rel="external">http://ribot.co.uk/images/sexyjoe.jpg</a>“) .into(imageView);</p>
<p>Long parameters case</p>
<p>When a method has many parameters or its parameters are very long, we should break the line after every comma ,</p>
<p>java loadPicture(context, “<a href="http://ribot.co.uk/images/sexyjoe.jpg" target="_blank" rel="external">http://ribot.co.uk/images/sexyjoe.jpg</a>“, mImageViewProfilePicture, clickListener, “Title of the picture”);</p>
<p>java loadPicture(context, “<a href="http://ribot.co.uk/images/sexyjoe.jpg" target="_blank" rel="external">http://ribot.co.uk/images/sexyjoe.jpg</a>“, mImageViewProfilePicture, clickListener, “Title of the picture”);</p>
<p>2.2.16 RxJava chains styling</p>
<p>Rx chains of operators require line-wrapping. Every operator must go in a new line and the line should be broken before the .</p>
<p>java public Observable&lt;Location&gt; syncLocations() { return mDatabaseHelper.getAllLocations() .concatMap(new Func1&lt;Location, Observable&lt;? extends Location&gt;&gt;() { @Override public Observable&lt;? extends Location&gt; call(Location location) { return mRetrofitService.getLocation(location.id); } }) .retry(new Func2&lt;Integer, Throwable, Boolean&gt;() { @Override public Boolean call(Integer numRetries, Throwable throwable) { return throwable instanceof RetrofitError; } }); }</p>
<p>2.3 XML style rules</p>
<p>2.3.1 Use self closing tags</p>
<p>When an XML element doesn\’t have any contents, you must use self closing tags.</p>
<p>This is good:</p>
<p>xml &lt;TextView android:id=”@+id/text_view_profile” android:layout_width=”wrap_content” android:layout_height=”wrap_content” /&gt;</p>
<p>This is bad :</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>2.3.2 Resources naming</p>
<p>Resource IDs and names are written in lowercase_underscore.</p>
<p>2.3.2.1 ID naming</p>
<p>IDs should be prefixed with the name of the element in lowercase underscore. For example:</p>
<p>Element    Prefix<br>TextView    text<em><br>ImageView    image</em><br>Button    button<em><br>Menu    menu</em><br>Image view example:</p>
<p>xml &lt;ImageView android:id=”@+id/image_profile” android:layout_width=”wrap_content” android:layout_height=”wrap_content” /&gt;</p>
<p>Menu example:</p>
<p>xml &lt;menu&gt; &lt;item android:id=”@+id/menu_done” android:title=”Done” /&gt; &lt;/menu&gt;</p>
<p>2.3.2.2 Strings</p>
<p>String names start with a prefix that identifies the section they belong to. For example registration_email_hint or registration_name_hint. If a string doesn\’t belong to any section, then you should follow the rules below:</p>
<p>Prefix    Description<br>error<em>    An error message<br>msg</em>    A regular information message<br>title<em>    A title, i.e. a dialog title<br>action</em>    An action such as “Save” or “Create”<br>2.3.2.3 Styles and Themes</p>
<p>Unless the rest of resources, style names are written in UpperCamelCase.</p>
<p>2.3.3 Attributes ordering</p>
<p>As a general rule you should try to group similar attributes together. A good way of ordering the most common attributes is:</p>
<p>View Id<br>Style<br>Layout width and layout height<br>Other layout attributes, sorted alphabetically<br>Remaining attributes, sorted alphabetically<br>2.4 Tests style rules</p>
<p>2.4.1 Unit tests</p>
<p>Test classes should match the name of the class the tests are targeting, followed by Test. For example, if we create a test class that contains tests for the DatabaseHelper, we should name it DatabaseHelperTest.</p>
<p>Test methods are annotated with @Test and should generally start with the name of the method that is being tested, followed by a precondition and/or expected behaviour.</p>
<p>Template: @Test void methodNamePreconditionExpectedBehaviour()<br>Example: @Test void signInWithEmptyEmailFails()<br>Precondition and/or expected behaviour may not always be required if the test is clear enough without them.</p>
<p>Sometimes a class may contain a large amount of methods, that at the same time require several tests for each method. In this case, it\’s recommendable to split up the test class into multiple ones. For example, if the DataManager contains a lot of methods we may want to divide it into DataManagerSignInTest, DataManagerLoadUsersTest, etc. Generally you will be able to see what tests belong together because they have common test fixtures.</p>
<p>2.4.2 Espresso tests</p>
<p>Every Espresso test class usually targets an Activity, therefore the name should match the name of the targeted Activity followed by Test, e.g. SignInActivityTest</p>
<p>When using the Espresso API it is a common practice to place chained methods in new lines.</p>
<p>java onView(withId(R.id.view)) .perform(scrollTo()) .check(matches(isDisplayed()))</p>
<p>License</p>
<p>Copyright 2015 Ribot Ltd.</p>
<p>Licensed under the Apache License, Version 2.0 (the “License”);<br>you may not use this file except in compliance with the License.<br>You may obtain a copy of the License at</p>
<p><a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="external">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software<br>distributed under the License is distributed on an “AS IS” BASIS,<br>WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br>See the License for the specific language governing permissions and<br>limitations under the License.<br>Architecture Guidelines</p>
<p>The architecture of our Android apps is based on the MVP (Model View Presenter) pattern.</p>
<p>View (UI layer): this is where Activities, Fragments and other standard Android components live. It’s responsible for displaying the data received from the presenters to the user. It also handles user interactions and inputs (click listeners, etc) and triggers the right action in the Presenter if needed.</p>
<p>Presenter: presenters subscribe to RxJava Observables provided by the DataManager. They are in charge of handling the subscription lifecycle, analysing/modifying the data returned by the DataManager and calling the appropriate methods in the View in order to display the data.</p>
<p>Model (Data Layer): this is responsible for retrieving, saving, caching and massaging data. It can communicate with local databases and other data stores as well as with restful APIs or third party SDKs. It is divided in two parts: a group of helpers and a DataManager. The number of helpers vary between project and each of them has a very specific function, e.g. talking to an API or saving data in SharedPreferences. The DataManager combines and transforms the outputs from different helpers using Rx operators so it can: 1) provide meaningful data to the Presenter, 2) group actions that will always happen together. This layer also contains the actual model classes that define how the data structure is.</p>
<p>Looking at the diagram from right to left:</p>
<p>Helpers (Model): A set of classes, each of them with a very specific responsibility. Their function can range from talking to APIs or a database to implementing some specific business logic. Every project will have different helpers but the most common ones are:</p>
<p>DatabaseHelper: It handles inserting, updating and retrieving data from a local SQLite database. Its methods return Rx Observables that emit plain java objects (models)<br>PreferencesHelper: It saves and gets data from SharedPreferences, it can return Observables or plain java objects directly.<br>Retrofit services : Retrofit interfaces that talk to Restful APIs, each different API will have its own Retrofit service. They return Rx Observables.<br>Data Manager (Model): It’s a key part of the architecture. It keeps a reference to every helper class and uses them to satisfy the requests coming from the presenters. Its methods make extensive use of Rx operators to combine, transform or filter the output coming from the helpers in order to generate the desired output ready for the Presenters. It returns observables that emit data models.</p>
<p>Presenters: Subscribe to observables provided by the DataManager and process the data in order to call the right method in the View.</p>
<p>Activities, Fragments, ViewGroups (View): Standard Android components that implement a set of methods that the Presenters can call. They also handle user interactions such as clicks and act accordingly by calling the appropriate method in the Presenter. These components also implement framework-related tasks such us managing the Android lifecycle, inflating views, etc.</p>
<p>Event Bus: It allows the View components to be notified of certain types of events that happen in the Model. Generally the DataManager posts events which can then be subscribed to by Activities and Fragments. The event bus is only used for very specific actions that are not related to only one screen and have a broadcasting nature, e.g. the user has signed out.</p>
<p>License</p>
<p>Copyright 2015 Ribot Ltd.</p>
<p>Licensed under the Apache License, Version 2.0 (the “License”);<br>you may not use this file except in compliance with the License.<br>You may obtain a copy of the License at</p>
<p><a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="external">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software<br>distributed under the License is distributed on an “AS IS” BASIS,<br>WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br>See the License for the specific language governing permissions and<br>limitations under the License.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/google推荐android代码规范/">google推荐android代码规范</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-用android studio将assets打包到jar文件的方法" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/02/02/用android studio将assets打包到jar文件的方法/" class="article-date">
  	<time datetime="2016-02-02T02:49:11.000Z" itemprop="datePublished">2月 2 2016</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="用android_studio将assets打包到jar文件的方法">用android studio将assets打包到jar文件的方法</h1><hr>
<p>在build.gradle中配置如下代码</p>
<pre><code>    <span class="keyword">def</span> SDK_BASENAME = <span class="string">"sdk"</span>;
    <span class="keyword">def</span> SDK_VERSION = <span class="string">"_V1.0"</span>;
    <span class="keyword">def</span> sdkDestinationPath = <span class="string">"build"</span>;
    <span class="keyword">def</span> zipFile = <span class="keyword">file</span>(<span class="string">'build/intermediates/bundles/release/classes.jar'</span>)


<span class="keyword">task</span> deleteBuild(type: <span class="keyword">Delete</span>) {
    <span class="keyword">delete</span> sdkDestinationPath + SDK_BASENAME + SDK_VERSION + <span class="string">".jar"</span>
}
<span class="keyword">task</span> makeJar(type: Jar) {
    <span class="keyword">from</span> zipTree(zipFile)
    <span class="keyword">from</span> <span class="keyword">fileTree</span>(dir: <span class="string">'src/main'</span>, <span class="keyword">includes</span>: [<span class="string">'assets/**'</span>])
    baseName = SDK_BASENAME + SDK_VERSION
    <span class="keyword">destinationDir</span> = <span class="keyword">file</span>(sdkDestinationPath)
}
makeJar.dependsOn(deleteBuild, build)
</code></pre><p>然后在gradle中的other中找到markJar执行，生成的jar文件在build文件夹下</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Js与android webview遭遇过的坑" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/02/02/Js与android webview遭遇过的坑/" class="article-date">
  	<time datetime="2016-02-02T02:48:48.000Z" itemprop="datePublished">2月 2 2016</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Uncaught_TypeError:_Object_[object_Object]_has_no_method">Uncaught TypeError: Object [object Object] has no method</h1><h2 id="可能产生该情况有几种可能">可能产生该情况有几种可能</h2><h3 id="1、安全限制问题">1、安全限制问题</h3><p>如果只在4.2版本以上的机器出问题，那么就是系统处于安全限制的问题了。Android文档这样说的</p>
<pre><code><span class="type">Caution</span>: <span class="type">If</span> you’ve <span class="type">set</span> your targetSdkVersion to <span class="number">17</span> <span class="keyword">or</span> higher, you must add the @<span class="type">JavascriptInterface</span> annotation to <span class="type">any</span> <span class="keyword">method</span> that you want available your web page code (the <span class="keyword">method</span> must also be public). <span class="type">If</span> you <span class="keyword">do</span> <span class="keyword">not</span> provide the annotation, then the <span class="keyword">method</span> will <span class="keyword">not</span> accessible by your web page <span class="keyword">when</span> running on <span class="type">Android</span> <span class="number">4</span>.<span class="number">2</span> <span class="keyword">or</span> higher.

    中文大意为

警告：如果你的程序目标平台是<span class="number">17</span>或者是更高，你必须要在暴露给网页可调用的方法（这个方法必须是公开的）加上@<span class="type">JavascriptInterface</span>注释。如果你不这样做的话，在<span class="number">4</span>.<span class="number">2</span>以以后的平台上，网页无法访问到你的方法。
例：
@<span class="type">JavascriptInterface</span>
public <span class="type">void</span> testMothed(<span class="type">String</span> str) {
}
</code></pre><p> 解决方法</p>
<p>将targetSdkVersion设置成17或更高，引入@JavascriptInterface注释<br>自己创建一个注释接口名字为@JavascriptInterface，然后将其引入。注意这个接口不能混淆。这种方式不推荐，大概在4.4之后有问题。<br>注，创建@JavascriptInterface代码</p>
<h3 id="2、代码混淆问题">2、代码混淆问题</h3><p>如果在没有混淆的版本运行正常，在混淆后的版本的代码运行错误，并提示Uncaught TypeError: Object [object Object] has no method，那就是你没有做混淆例外处理。 在混淆文件加入类似这样的代码</p>
<pre><code>-<span class="ruby">keepattributes *<span class="constant">Annotation</span>*
</span>-<span class="ruby">keepclassmembers <span class="class"><span class="keyword">class</span> * {</span>
</span>    @android.webkit.JavascriptInterface &lt;methods&gt;;
}
</code></pre><p>本人测试环境是android5.1 moto x 1085</p>
<p>博文主要参考<br><a href="http://droidyue.com/blog/2014/09/20/interaction-between-java-and-javascript-in-android/" target="_blank" rel="external">http://droidyue.com/blog/2014/09/20/interaction-between-java-and-javascript-in-android/</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-悬浮控件开发笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/02/02/悬浮控件开发笔记/" class="article-date">
  	<time datetime="2016-02-02T02:48:47.000Z" itemprop="datePublished">2月 2 2016</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>感谢以下大神的研究，顺利完成悬浮控件开发任务</p>
<p><a href="http://www.jianshu.com/p/167fd5f47d5c" target="_blank" rel="external">http://www.jianshu.com/p/167fd5f47d5c</a><br><a href="http://www.jianshu.com/p/634cd056b90c" target="_blank" rel="external">http://www.jianshu.com/p/634cd056b90c</a><br><a href="http://www.liaohuqiu.net/cn/posts/android-windows-manager/" target="_blank" rel="external">http://www.liaohuqiu.net/cn/posts/android-windows-manager/</a><br><a href="https://github.com/pengjianbo/FloatViewFinal" target="_blank" rel="external">https://github.com/pengjianbo/FloatViewFinal</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 yiming
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>