<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>yiming</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="yiming&apos;s blog | java | android | ios">
<meta property="og:type" content="website">
<meta property="og:title" content="yiming">
<meta property="og:url" content="http://fanofdemo.github.io/index.html">
<meta property="og:site_name" content="yiming">
<meta property="og:description" content="yiming&apos;s blog | java | android | ios">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="yiming">
<meta name="twitter:description" content="yiming&apos;s blog | java | android | ios">
  
    <link rel="alternative" href="/atom.xml" title="yiming" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="null" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">yiming</a></h1>
		</hgroup>

		
		<p class="header-subtitle">最近学习方向 插件开发 hook Laucher源码 URI路由架构</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>標籤</li>
						
						<li>友情链接</li>
						
						
						<li>關於</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/instagram">相册</a></li>
				        
							<li><a href="/about">关于我</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/fanOfDemo" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/wengyiming" title="weibo">weibo</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/android/" style="font-size: 20px;">android</a> <a href="/tags/fragment/" style="font-size: 10px;">fragment</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/XXApple/AndroidLibs">Android开源代码大全</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.colorfulcat.xyz/?from=androidcat">大花猫</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://androidcat.com/">android素材书签</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://dev2patrick.com/">patrick</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://aimeow.com/">aimeow</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">最近学习方向 插件开发 hook Laucher源码 URI路由架构</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">yiming</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="null" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">yiming</h1>
			</hgroup>
			
			<p class="header-subtitle">最近学习方向 插件开发 hook Laucher源码 URI路由架构</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/instagram">相册</a></li>
		        
					<li><a href="/about">关于我</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/fanOfDemo" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/wengyiming" title="weibo">weibo</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-用android studio将assets打包到jar文件的方法" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/02/02/用android studio将assets打包到jar文件的方法/" class="article-date">
  	<time datetime="2016-02-02T02:49:11.000Z" itemprop="datePublished">2月 2 2016</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="用android_studio将assets打包到jar文件的方法">用android studio将assets打包到jar文件的方法</h1><hr>
<p>在build.gradle中配置如下代码</p>
<pre><code>    <span class="keyword">def</span> SDK_BASENAME = <span class="string">"sdk"</span>;
    <span class="keyword">def</span> SDK_VERSION = <span class="string">"_V1.0"</span>;
    <span class="keyword">def</span> sdkDestinationPath = <span class="string">"build"</span>;
    <span class="keyword">def</span> zipFile = <span class="keyword">file</span>(<span class="string">'build/intermediates/bundles/release/classes.jar'</span>)


<span class="keyword">task</span> deleteBuild(type: <span class="keyword">Delete</span>) {
    <span class="keyword">delete</span> sdkDestinationPath + SDK_BASENAME + SDK_VERSION + <span class="string">".jar"</span>
}
<span class="keyword">task</span> makeJar(type: Jar) {
    <span class="keyword">from</span> zipTree(zipFile)
    <span class="keyword">from</span> <span class="keyword">fileTree</span>(dir: <span class="string">'src/main'</span>, <span class="keyword">includes</span>: [<span class="string">'assets/**'</span>])
    baseName = SDK_BASENAME + SDK_VERSION
    <span class="keyword">destinationDir</span> = <span class="keyword">file</span>(sdkDestinationPath)
}
makeJar.dependsOn(deleteBuild, build)
</code></pre><p>然后在gradle中的other中找到markJar执行，生成的jar文件在build文件夹下</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Js与android webview遭遇过的坑" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/02/02/Js与android webview遭遇过的坑/" class="article-date">
  	<time datetime="2016-02-02T02:48:48.000Z" itemprop="datePublished">2月 2 2016</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Uncaught_TypeError:_Object_[object_Object]_has_no_method">Uncaught TypeError: Object [object Object] has no method</h1><h2 id="可能产生该情况有几种可能">可能产生该情况有几种可能</h2><h3 id="1、安全限制问题">1、安全限制问题</h3><p>如果只在4.2版本以上的机器出问题，那么就是系统处于安全限制的问题了。Android文档这样说的</p>
<pre><code><span class="type">Caution</span>: <span class="type">If</span> you’ve <span class="type">set</span> your targetSdkVersion to <span class="number">17</span> <span class="keyword">or</span> higher, you must add the @<span class="type">JavascriptInterface</span> annotation to <span class="type">any</span> <span class="keyword">method</span> that you want available your web page code (the <span class="keyword">method</span> must also be public). <span class="type">If</span> you <span class="keyword">do</span> <span class="keyword">not</span> provide the annotation, then the <span class="keyword">method</span> will <span class="keyword">not</span> accessible by your web page <span class="keyword">when</span> running on <span class="type">Android</span> <span class="number">4</span>.<span class="number">2</span> <span class="keyword">or</span> higher.

    中文大意为

警告：如果你的程序目标平台是<span class="number">17</span>或者是更高，你必须要在暴露给网页可调用的方法（这个方法必须是公开的）加上@<span class="type">JavascriptInterface</span>注释。如果你不这样做的话，在<span class="number">4</span>.<span class="number">2</span>以以后的平台上，网页无法访问到你的方法。
例：
@<span class="type">JavascriptInterface</span>
public <span class="type">void</span> testMothed(<span class="type">String</span> str) {
}
</code></pre><p> 解决方法</p>
<p>将targetSdkVersion设置成17或更高，引入@JavascriptInterface注释<br>自己创建一个注释接口名字为@JavascriptInterface，然后将其引入。注意这个接口不能混淆。这种方式不推荐，大概在4.4之后有问题。<br>注，创建@JavascriptInterface代码</p>
<h3 id="2、代码混淆问题">2、代码混淆问题</h3><p>如果在没有混淆的版本运行正常，在混淆后的版本的代码运行错误，并提示Uncaught TypeError: Object [object Object] has no method，那就是你没有做混淆例外处理。 在混淆文件加入类似这样的代码</p>
<pre><code>-<span class="ruby">keepattributes *<span class="constant">Annotation</span>*
</span>-<span class="ruby">keepclassmembers <span class="class"><span class="keyword">class</span> * {</span>
</span>    @android.webkit.JavascriptInterface &lt;methods&gt;;
}
</code></pre><p>本人测试环境是android5.1 moto x 1085</p>
<p>博文主要参考<br><a href="http://droidyue.com/blog/2014/09/20/interaction-between-java-and-javascript-in-android/" target="_blank" rel="external">http://droidyue.com/blog/2014/09/20/interaction-between-java-and-javascript-in-android/</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-悬浮控件开发笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/02/02/悬浮控件开发笔记/" class="article-date">
  	<time datetime="2016-02-02T02:48:47.000Z" itemprop="datePublished">2月 2 2016</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>感谢以下大神的研究，顺利完成悬浮控件开发任务</p>
<p><a href="http://www.jianshu.com/p/167fd5f47d5c" target="_blank" rel="external">http://www.jianshu.com/p/167fd5f47d5c</a><br><a href="http://www.jianshu.com/p/634cd056b90c" target="_blank" rel="external">http://www.jianshu.com/p/634cd056b90c</a><br><a href="http://www.liaohuqiu.net/cn/posts/android-windows-manager/" target="_blank" rel="external">http://www.liaohuqiu.net/cn/posts/android-windows-manager/</a><br><a href="https://github.com/pengjianbo/FloatViewFinal" target="_blank" rel="external">https://github.com/pengjianbo/FloatViewFinal</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-换了个公司，终于从劳碌的工作中解脱出来，于是一开心写了个app" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/17/换了个公司，终于从劳碌的工作中解脱出来，于是一开心写了个app/" class="article-date">
  	<time datetime="2015-11-17T15:54:48.000Z" itemprop="datePublished">11月 17 2015</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/17/换了个公司，终于从劳碌的工作中解脱出来，于是一开心写了个app/">换了个公司，终于从劳碌的工作中解脱出来，于是一开心写了个app</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>app的名字想了半天也不知道叫啥，于是随大流就叫简悦吧<br>  [简悦]  (<a href="https://github.com/fanOfDemo/jianyue" target="_blank" rel="external">https://github.com/fanOfDemo/jianyue</a>)</p>
<p>数据使用的是聚合数据的免费API，之所以选择聚合是因为聚合最近有大量的API正在免费，方便后期扩展功能吧</p>
<p>框架及基础功能完善后大概会提交了我们的装逼协会<a href="https://github.com/XXApple" target="_blank" rel="external">XXApple</a>中</p>
<p>框架方面主要使用的都是比较流行但国内企业又尝试不多的框架</p>
<p><a href="https://github.com/ReactiveX/RxJava" target="_blank" rel="external">rxjava</a><br><a href="https://github.com/square/retrofit" target="_blank" rel="external">retrofit2.0</a><br><a href="https://github.com/square/okhttp" target="_blank" rel="external">okhttp</a><br><a href="http://developer.android.com/" target="_blank" rel="external">design</a><br><a href="https://github.com/bumptech/glide" target="_blank" rel="external">glide</a><br><a href="https://github.com/square/leakcanary" target="_blank" rel="external">leakcanary</a></p>
<p>今天只是记录一下，最近可怜的初尝逃离北上广的滋味，年纪轻轻就吃到了苦头也不知是好是坏，生活残酷，大家加油吧</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-比swift的playgroundg更加强大的android代码即使预览功能" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/27/比swift的playgroundg更加强大的android代码即使预览功能/" class="article-date">
  	<time datetime="2015-10-27T04:53:37.000Z" itemprop="datePublished">10月 27 2015</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/27/比swift的playgroundg更加强大的android代码即使预览功能/">比swift的playground更加强大的android代码即使预览功能</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>JRebel for Android android studio插件 </p>
<p>代码修改时，跳过编译安装和运行，立刻看到代码改变后的效果</p>
<p>JRebel for Android可以跳过编译安装运行等步骤， 直接挑出你的app中已改变的代码或资源文件，不用改变app的任何状态立刻看出效果</p>
<p>Skip build, install and run<br>JRebel for Android picks up changes to your application and skips the build, install and run steps. Make code or resource file changes and see the effect immediately. All this without changing the state of the application.</p>
<p>Tweak app UI in real-time<br>Modify resources in real-time on one device or more. Make sure that your app looks and feels perfect. Changing project code is immediately reflected on the device.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 yiming
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>